<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

            <link rel="manifest" href="../../site.webmanifest"/>
            
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-53HJHD1BWS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-53HJHD1BWS');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Continuous Integration &mdash; tardis</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />

  
    <link rel="shortcut icon" href="../../_static/tardis_logo.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/ServiceHandler.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link href="../../_static/tardis.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            tardis
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Continuous Integration</a><ul>
<li><a class="reference internal" href="#github-actions">GitHub Actions</a><ul>
<li><a class="reference internal" href="#tardis-pipelines">TARDIS Pipelines</a></li>
<li><a class="reference internal" href="#streamlined-steps-for-tardis-pipelines">Streamlined Steps for TARDIS Pipelines</a></li>
</ul>
</li>
<li><a class="reference internal" href="#common-steps">Common Steps</a><ul>
<li><a class="reference internal" href="#documentation-build-pipeline">Documentation build pipeline</a></li>
<li><a class="reference internal" href="#documentation-preview-pipeline">Documentation preview pipeline</a></li>
<li><a class="reference internal" href="#id1">Testing pipeline</a></li>
<li><a class="reference internal" href="#authors-pipeline">Authors pipeline</a></li>
<li><a class="reference internal" href="#release-pipeline">Release pipeline</a></li>
<li><a class="reference internal" href="#tardis-carsus-compatibility-check">TARDIS Carsus Compatibility Check</a></li>
<li><a class="reference internal" href="#the-save-atomic-files-workflow">The Save Atomic Files Workflow</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">tardis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Continuous Integration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/contributing/development/continuous_integration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="continuous-integration">
<h1>Continuous Integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">¶</a></h1>
<p>We use a so-called <a class="reference internal" href="#continuous-integration">continuous integration</a> workflow with TARDIS.
This means that each time a change is proposed (via pull request)
or a change is merged into the <em>master</em> branch, a service will
clone the repository, checkout to the current commit and execute
all the TARDIS tests. This helps us to detect bugs immediately.</p>
<section id="github-actions">
<h2>GitHub Actions<a class="headerlink" href="#github-actions" title="Link to this heading">¶</a></h2>
<p>A pipeline (or a workflow) is essentially a <a class="reference internal" href="../../resources/zreferences.html#term-YAML"><span class="xref std std-term">YAML</span></a> configuration file
with different sections such as variables, jobs and steps. These files
run commands or tasks when they are triggered by some event, like a
commit being pushed to a certain branch.</p>
<p>Currently, we use GitHub Actions to run all of our pipelines. Making changes to an existing
pipeline is as easy as making a pull request. To create a new GitHub Action workflow,
just create a new YAML file in <code class="docutils literal notranslate"><span class="pre">.github/workflows</span></code>.</p>
<section id="tardis-pipelines">
<h3>TARDIS Pipelines<a class="headerlink" href="#tardis-pipelines" title="Link to this heading">¶</a></h3>
<p>Brief description of pipelines already implemented on TARDIS</p>
</section>
<section id="streamlined-steps-for-tardis-pipelines">
<h3>Streamlined Steps for TARDIS Pipelines<a class="headerlink" href="#streamlined-steps-for-tardis-pipelines" title="Link to this heading">¶</a></h3>
<p>We have a common set of steps which are utilized in TARDIS pipelines to streamline the process:</p>
</section>
</section>
<section id="common-steps">
<h2>Common Steps<a class="headerlink" href="#common-steps" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p><strong>Use `setup_lfs` Action</strong>
- If you need access to regression or atomic data, incorporate the <code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_lfs</span></code> action to ensure proper handling of large file storage.</p></li>
<li><p><strong>Use `setup_env` Action</strong>
- To configure your environment effectively, utilize the <code class="xref py py-obj docutils literal notranslate"><span class="pre">setup_env</span></code> action. This will help establish the necessary variables and settings for your pipeline.</p></li>
<li><p><strong>Run Configuration</strong>
- Ensure that your pipeline runs with the appropriate shell settings. You can define this in your YAML configuration as follows:</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">run</span><span class="p">:</span>
<span class="w">    </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bash -l {0}</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<section id="documentation-build-pipeline">
<h3>Documentation build pipeline<a class="headerlink" href="#documentation-build-pipeline" title="Link to this heading">¶</a></h3>
<p>A GitHub Actions workflow that builds and deploys the TARDIS documentation website.</p>
</section>
<section id="documentation-preview-pipeline">
<h3>Documentation preview pipeline<a class="headerlink" href="#documentation-preview-pipeline" title="Link to this heading">¶</a></h3>
<p>This workflow does not run on the main repository, just on forks.
See the <a class="reference internal" href="documentation_guidelines.html#doc-preview"><span class="std std-ref">Documentation Preview</span></a> section for more information.</p>
</section>
<section id="id1">
<h3>Testing pipeline<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/tardis-sn/tardis/blob/master/azure-pipelines/simple_test_framework.yml">testing pipeline</a> (CI) comprises multiple concurrent jobs. Each of these jobs runs tests across two distinct categories—continuum and rpacket tracking—and supports two different operating systems. Additionally, there are extra steps involved in executing the tests and uploading the coverage results</p>
</section>
<section id="authors-pipeline">
<h3>Authors pipeline<a class="headerlink" href="#authors-pipeline" title="Link to this heading">¶</a></h3>
<p>This pipeline runs a notebook located in <code class="docutils literal notranslate"><span class="pre">tardis-zenodo</span></code> repository and
pushes a new version of <code class="docutils literal notranslate"><span class="pre">.zenodo.json</span></code> to the root of <code class="docutils literal notranslate"><span class="pre">tardis</span></code>
repository if new committers are found (or author order changes). The
rendered notebook is uploaded to the pipeline results as an artifact.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Fails if some author name is incomplete (due to an incomplete
GitHub profile) or duplicated (committed with more than one
email address). In both cases update <code class="docutils literal notranslate"><span class="pre">.mailmap</span></code> to fix it.</p>
</div>
<p>In the near future we want to auto-update the citation guidelines in the
<code class="docutils literal notranslate"><span class="pre">README.rst</span></code> and the documentation.</p>
</section>
<section id="release-pipeline">
<h3>Release pipeline<a class="headerlink" href="#release-pipeline" title="Link to this heading">¶</a></h3>
<p>Publishes a new release of TARDIS every Sunday at 00:00 UTC.</p>
</section>
<section id="tardis-carsus-compatibility-check">
<h3>TARDIS Carsus Compatibility Check<a class="headerlink" href="#tardis-carsus-compatibility-check" title="Link to this heading">¶</a></h3>
<p>The TARDIS Carsus Compatibility Check or the “Bridge” compares reference data
generated with different versions of Carsus. It consists of two jobs- a “carsus-build” job to
generate an atomic file with the latest version of Carsus and a “tardis-build” job
to generate a new reference data with it. These two reference data files are compared using the
<a class="reference external" href="https://github.com/tardis-sn/tardis-refdata/blob/master/notebooks/ref_data_compare_from_paths.ipynb">this notebook</a>.
The workflow has a <code class="docutils literal notranslate"><span class="pre">workflow_dispatch</span></code> event so that it can be triggered manually, but is also
triggered every week due to the “save-atomic-files” workflow.</p>
</section>
<section id="the-save-atomic-files-workflow">
<h3>The Save Atomic Files Workflow<a class="headerlink" href="#the-save-atomic-files-workflow" title="Link to this heading">¶</a></h3>
<p>The Save Atomic Files workflow runs every week but can also be triggered manually.
It runs the “Bridge” and sends an artifact containing the generated atomic data file
and the comparison notebook to Moria. This workflow has a separate job to indicate if the
bridge has failed.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2024, TARDIS Collaboration.
      <span class="lastupdated">Last updated on 11 Nov 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>